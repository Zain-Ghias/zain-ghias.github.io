<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-11-10">
<meta name="description" content="End-to-end analytics project combining SQL-based data cleaning, transformation, and Power BI dashboards to uncover revenue trends, profitability drivers, and customer behavior insights.">

<title>Customer &amp; Product Profitability Analytics Dashboard – Zain A. Ghias</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-cc63fce9873912f1bbbccf05079cc9ea.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-08799928d293638fe9563d5c5a2794e5.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-cc63fce9873912f1bbbccf05079cc9ea.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Zain A. Ghias</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Zain-Ghias"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/zain-ghias/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
  <li><a href="#business-questions-this-analysis-answers" id="toc-business-questions-this-analysis-answers" class="nav-link" data-scroll-target="#business-questions-this-analysis-answers">Business Questions This Analysis Answers</a></li>
  </ul></li>
  <li><a href="#project-purpose" id="toc-project-purpose" class="nav-link" data-scroll-target="#project-purpose">Project Purpose</a>
  <ul class="collapse">
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#core-question" id="toc-core-question" class="nav-link" data-scroll-target="#core-question">Core Question</a></li>
  <li><a href="#why-this-dataset" id="toc-why-this-dataset" class="nav-link" data-scroll-target="#why-this-dataset">Why This Dataset?</a></li>
  <li><a href="#tools-technologies" id="toc-tools-technologies" class="nav-link" data-scroll-target="#tools-technologies">Tools &amp; Technologies</a></li>
  </ul></li>
  <li><a href="#data-summary" id="toc-data-summary" class="nav-link" data-scroll-target="#data-summary">Data Summary</a></li>
  <li><a href="#data-preparation-sql" id="toc-data-preparation-sql" class="nav-link" data-scroll-target="#data-preparation-sql">Data Preparation (SQL)</a>
  <ul class="collapse">
  <li><a href="#transformation-steps" id="toc-transformation-steps" class="nav-link" data-scroll-target="#transformation-steps">Transformation Steps</a></li>
  <li><a href="#sql-transformation-script" id="toc-sql-transformation-script" class="nav-link" data-scroll-target="#sql-transformation-script">SQL Transformation Script</a></li>
  </ul></li>
  <li><a href="#exploratory-analysis-sql" id="toc-exploratory-analysis-sql" class="nav-link" data-scroll-target="#exploratory-analysis-sql">Exploratory Analysis (SQL)</a>
  <ul class="collapse">
  <li><a href="#analysis-queries" id="toc-analysis-queries" class="nav-link" data-scroll-target="#analysis-queries">Analysis Queries</a></li>
  </ul></li>
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings">Key Findings</a>
  <ul class="collapse">
  <li><a href="#executive-summary" id="toc-executive-summary" class="nav-link" data-scroll-target="#executive-summary">Executive Summary</a></li>
  <li><a href="#profitability-by-product-category" id="toc-profitability-by-product-category" class="nav-link" data-scroll-target="#profitability-by-product-category">Profitability by Product Category</a></li>
  <li><a href="#most-profitable-sub-categories" id="toc-most-profitable-sub-categories" class="nav-link" data-scroll-target="#most-profitable-sub-categories">Most Profitable Sub-Categories</a></li>
  <li><a href="#regional-performance" id="toc-regional-performance" class="nav-link" data-scroll-target="#regional-performance">Regional Performance</a></li>
  <li><a href="#monthly-revenue-profit-trends" id="toc-monthly-revenue-profit-trends" class="nav-link" data-scroll-target="#monthly-revenue-profit-trends">Monthly Revenue &amp; Profit Trends</a></li>
  <li><a href="#customer-segmentation-insights" id="toc-customer-segmentation-insights" class="nav-link" data-scroll-target="#customer-segmentation-insights">Customer Segmentation Insights</a></li>
  </ul></li>
  <li><a href="#dashboards-insights" id="toc-dashboards-insights" class="nav-link" data-scroll-target="#dashboards-insights">Dashboards &amp; Insights</a>
  <ul class="collapse">
  <li><a href="#dashboard-1-sales-performance-profitability" id="toc-dashboard-1-sales-performance-profitability" class="nav-link" data-scroll-target="#dashboard-1-sales-performance-profitability">Dashboard 1: Sales Performance &amp; Profitability</a></li>
  <li><a href="#dashboard-2-customer-insights-behavioral-analysis" id="toc-dashboard-2-customer-insights-behavioral-analysis" class="nav-link" data-scroll-target="#dashboard-2-customer-insights-behavioral-analysis">Dashboard 2: Customer Insights &amp; Behavioral Analysis</a></li>
  </ul></li>
  <li><a href="#data-limitations-assumptions" id="toc-data-limitations-assumptions" class="nav-link" data-scroll-target="#data-limitations-assumptions">Data Limitations &amp; Assumptions</a>
  <ul class="collapse">
  <li><a href="#data-structure-limitations" id="toc-data-structure-limitations" class="nav-link" data-scroll-target="#data-structure-limitations">Data Structure Limitations</a></li>
  <li><a href="#assumptions-in-analysis" id="toc-assumptions-in-analysis" class="nav-link" data-scroll-target="#assumptions-in-analysis">Assumptions in Analysis</a></li>
  <li><a href="#impact-on-insights" id="toc-impact-on-insights" class="nav-link" data-scroll-target="#impact-on-insights">Impact on Insights</a></li>
  </ul></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways">Key Takeaways</a></li>
  <li><a href="#project-note" id="toc-project-note" class="nav-link" data-scroll-target="#project-note">Project Note</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Customer &amp; Product Profitability Analytics Dashboard</h1>
</div>

<div>
  <div class="description">
    End-to-end analytics project combining SQL-based data cleaning, transformation, and Power BI dashboards to uncover revenue trends, profitability drivers, and customer behavior insights.
  </div>
</div>


<div class="quarto-title-meta column-page-left">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 10, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p><img src="images/OverviewStatic.png" class="img-fluid" data-fig-cap="Sales Performance &amp; Profitability Dashboard: interactive Power BI dashboard showing revenue, profit, and margin analysis across products, regions, and time"></p>
<p>This project analyzes an <strong>18,432-transaction retail dataset</strong> using <strong>SQL</strong> and <strong>Power BI</strong> to answer critical business questions about profitability, customer behavior, and market performance.<br>
The project shows a clear workflow from <strong>SQL transformation</strong> to <strong>Power BI dashboards</strong>, with all cleaning and metric engineering completed in SQL before visualization.</p>
<section id="business-questions-this-analysis-answers" class="level3">
<h3 class="anchored" data-anchor-id="business-questions-this-analysis-answers">Business Questions This Analysis Answers</h3>
<p>The SQL analysis and Power BI dashboards address these key business questions:</p>
<p><strong>Product &amp; Profitability:</strong> - Which product categories generate the highest revenue? - Which categories actually drive profit (not just sales)? - Which sub-categories are the true margin leaders?</p>
<p><strong>Market Performance:</strong> - Which countries and markets outperform others? - How do sales and profit evolve over time?</p>
<p><strong>Customer Behavior:</strong> - Who are the highest-value customers? - Which age groups drive the most revenue? - Does gender influence spending patterns? - Which regions consistently attract high-value sales?</p>
<hr>
</section>
</section>
<section id="project-purpose" class="level2">
<h2 class="anchored" data-anchor-id="project-purpose">Project Purpose</h2>
<section id="motivation" class="level3">
<h3 class="anchored" data-anchor-id="motivation">Motivation</h3>
<p>Understanding which products and markets actually drive profitability is crucial for business decision-making. Revenue alone doesn’t tell the full story. This project explores the gap between high-revenue categories and high-profit categories, revealing patterns that can inform pricing, inventory, and marketing strategies.</p>
</section>
<section id="core-question" class="level3">
<h3 class="anchored" data-anchor-id="core-question">Core Question</h3>
<blockquote class="blockquote">
<p>Which products, markets, and customer segments drive profitability, and how do revenue and profit patterns differ across categories and regions?</p>
</blockquote>
</section>
<section id="why-this-dataset" class="level3">
<h3 class="anchored" data-anchor-id="why-this-dataset">Why This Dataset?</h3>
<p>This retail transaction dataset provides a realistic view of profitability challenges in a competitive market. The data includes product categories, customer demographics, geography, pricing, and costs, making it ideal for understanding margin dynamics and identifying opportunities for optimization.</p>
</section>
<section id="tools-technologies" class="level3">
<h3 class="anchored" data-anchor-id="tools-technologies">Tools &amp; Technologies</h3>
<ul>
<li><strong>SQL:</strong> MySQL Workbench - data transformation and analysis</li>
<li><strong>Power BI:</strong> Dashboard development and visualization</li>
</ul>
<hr>
</section>
</section>
<section id="data-summary" class="level2">
<h2 class="anchored" data-anchor-id="data-summary">Data Summary</h2>
<ul>
<li><strong>Source:</strong> <a href="https://www.kaggle.com/datasets/thedevastator/analyzing-customer-spending-habits-to-improve-sa">Analyzing Customer Spending Habits</a> (Kaggle)</li>
<li><strong>Original Author:</strong> Vineet Bahl</li>
<li><strong>Dataset:</strong> SalesForCourse_quizz_table.csv</li>
<li><strong>Volume:</strong> 18,432 transactions</li>
<li><strong>Time Period:</strong> January 2015 - July 2016</li>
<li><strong>Key Fields:</strong> Date, Year, Month, Customer Age, Customer Gender, Country, State, Product Category, Sub Category, Quantity, Unit Cost, Unit Price, Revenue</li>
<li><strong>Data Structure:</strong> Single flat table format (not normalized). In a production environment, this data would typically be stored across multiple normalized tables (e.g., <code>orders</code>, <code>order_items</code>, <code>customers</code>, <code>products</code>, <code>inventory</code>).</li>
<li><strong>Key Limitation:</strong> The dataset lacks product-level IDs and customer IDs, which limits product-specific tracking and individual customer analysis. See the <a href="#data-limitations--assumptions">Data Limitations</a> section for details.</li>
</ul>
<hr>
</section>
<section id="data-preparation-sql" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation-sql">Data Preparation (SQL)</h2>
<p>Before visualization, the raw dataset required significant transformation. All cleaning and metric engineering was completed in <strong>MySQL</strong> using structured SQL scripts.</p>
<section id="transformation-steps" class="level3">
<h3 class="anchored" data-anchor-id="transformation-steps">Transformation Steps</h3>
<ol type="1">
<li><strong>Standardized column names</strong> - converted spaces to underscores for SQL compatibility</li>
<li><strong>Date conversion</strong> - transformed text-based dates (<code>MM/DD/YY</code>) into proper <code>DATE</code> type</li>
<li><strong>Metric engineering</strong> - calculated <code>Profit</code> and <code>Profit_Margin</code> at the transaction level</li>
<li><strong>Data validation</strong> - ran checks for nulls, negative values, and revenue calculation mismatches</li>
</ol>
</section>
<section id="sql-transformation-script" class="level3">
<h3 class="anchored" data-anchor-id="sql-transformation-script">SQL Transformation Script</h3>
<p>The complete transformation script is available for download: <a href="sql/transformations.sql">transformations.sql</a></p>
<p><strong>Key transformations:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">-- Standardize column names</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> sales_transactions</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">CHANGE</span> <span class="kw">COLUMN</span> `Customer Age` Customer_Age <span class="dt">INT</span>,</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">CHANGE</span> <span class="kw">COLUMN</span> `Customer Gender` Customer_Gender <span class="dt">VARCHAR</span>(<span class="dv">10</span>),</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">CHANGE</span> <span class="kw">COLUMN</span> `Product Category` Product_Category <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="kw">CHANGE</span> <span class="kw">COLUMN</span> `Sub Category` Sub_Category <span class="dt">VARCHAR</span>(<span class="dv">50</span>);</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">-- Convert text dates to DATE type</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="kw">UPDATE</span> sales_transactions</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="kw">SET</span> Date_Formatted <span class="op">=</span> STR_TO_DATE(<span class="dt">Date</span>, <span class="st">'%m/%d/%y'</span>);</span>
<span id="cb1-11"><a href="#cb1-11"></a></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="co">-- Add derived business metrics</span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="kw">UPDATE</span> sales_transactions</span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="kw">SET</span> Profit <span class="op">=</span> (Unit_Price <span class="op">-</span> Unit_Cost) <span class="op">*</span> Quantity,</span>
<span id="cb1-15"><a href="#cb1-15"></a>    Profit_Margin <span class="op">=</span> <span class="fu">ROUND</span>(Profit <span class="op">/</span> Revenue <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>What this does:</strong></p>
<ul>
<li>Column name standardization (e.g., <code>Customer Age</code> to <code>Customer_Age</code>)</li>
<li>Date parsing using <code>STR_TO_DATE()</code> with format <code>'%m/%d/%y'</code></li>
<li>Profit calculation: <code>(Unit_Price - Unit_Cost) * Quantity</code></li>
<li>Profit margin: <code>(Profit / Revenue) * 100</code></li>
</ul>
<hr>
</section>
</section>
<section id="exploratory-analysis-sql" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-analysis-sql">Exploratory Analysis (SQL)</h2>
<p>After transformation, exploratory queries were run to understand profitability patterns, validate data quality, and prepare insights for visualization.</p>
<section id="analysis-queries" class="level3">
<h3 class="anchored" data-anchor-id="analysis-queries">Analysis Queries</h3>
<p>The complete analysis script is available for download: <a href="sql/analysis_queries.sql">analysis_queries.sql</a></p>
<p><strong>Example queries:</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">-- Executive Summary Metrics</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">SELECT</span> </span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="fu">ROUND</span>(<span class="fu">SUM</span>(Revenue), <span class="dv">2</span>) <span class="kw">AS</span> Total_Revenue,</span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="fu">ROUND</span>(<span class="fu">SUM</span>(Profit), <span class="dv">2</span>) <span class="kw">AS</span> Total_Profit,</span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="fu">ROUND</span>(<span class="fu">AVG</span>(Profit_Margin), <span class="dv">2</span>) <span class="kw">AS</span> Avg_Profit_Margin,</span>
<span id="cb2-6"><a href="#cb2-6"></a>    <span class="fu">SUM</span>(Quantity) <span class="kw">AS</span> Total_Units_Sold,</span>
<span id="cb2-7"><a href="#cb2-7"></a>    <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> Total_Transactions</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="kw">FROM</span> sales_transactions;</span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">-- Revenue / Profit by Product Category</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="kw">SELECT</span> </span>
<span id="cb2-12"><a href="#cb2-12"></a>    Product_Category,</span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="fu">ROUND</span>(<span class="fu">SUM</span>(Revenue), <span class="dv">2</span>) <span class="kw">AS</span> Total_Revenue,</span>
<span id="cb2-14"><a href="#cb2-14"></a>    <span class="fu">ROUND</span>(<span class="fu">SUM</span>(Profit), <span class="dv">2</span>) <span class="kw">AS</span> Total_Profit,</span>
<span id="cb2-15"><a href="#cb2-15"></a>    <span class="fu">ROUND</span>(<span class="fu">AVG</span>(Profit_Margin), <span class="dv">2</span>) <span class="kw">AS</span> Avg_Profit_Margin</span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="kw">FROM</span> sales_transactions</span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="kw">GROUP</span> <span class="kw">BY</span> Product_Category</span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="kw">ORDER</span> <span class="kw">BY</span> Total_Profit <span class="kw">DESC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Analysis covered:</strong></p>
<ul>
<li>Executive summary metrics (total revenue, profit, margin)</li>
<li>Product category and sub-category profitability</li>
<li>Regional performance (country and state level)</li>
<li>Monthly revenue and profit trends</li>
<li>Customer segmentation by age and gender</li>
<li>Margin analysis across product lines</li>
</ul>
<hr>
</section>
</section>
<section id="key-findings" class="level2">
<h2 class="anchored" data-anchor-id="key-findings">Key Findings</h2>
<section id="executive-summary" class="level3">
<h3 class="anchored" data-anchor-id="executive-summary">Executive Summary</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Overall Performance
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Metric</th>
<th style="text-align: right;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Total Revenue</strong></td>
<td style="text-align: right;"><span style="color: #007bff; font-weight: 700; font-size: 1.1em;">$12.94M</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Total Profit</strong></td>
<td style="text-align: right;"><span style="color: #28a745; font-weight: 700; font-size: 1.1em;">$1.30M</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Average Profit Margin</strong></td>
<td style="text-align: right;"><span style="color: #ffc107; font-weight: 700; font-size: 1.1em;">13.37%</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Total Units Sold</strong></td>
<td style="text-align: right;">36,805</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Total Transactions</strong></td>
<td style="text-align: right;">18,432</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="profitability-by-product-category" class="level3">
<h3 class="anchored" data-anchor-id="profitability-by-product-category">Profitability by Product Category</h3>
<p>The analysis reveals a clear pattern: <strong>accessories drive profit, while bikes drive volume</strong>.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: right;">Revenue</th>
<th style="text-align: right;">Profit</th>
<th style="text-align: right;">Avg Margin</th>
<th style="text-align: right;">Units Sold</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Accessories</strong></span></td>
<td style="text-align: right;">$3.97M</td>
<td style="text-align: right;">$740,630</td>
<td style="text-align: right;">17.23%</td>
<td style="text-align: right;">22,873</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #17a2b8; font-weight: 600;"><strong>Clothing</strong></span></td>
<td style="text-align: right;">$1.91M</td>
<td style="text-align: right;">$304,852</td>
<td style="text-align: right;">14.80%</td>
<td style="text-align: right;">5,692</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #fd7e14; font-weight: 600;"><strong>Bikes</strong></span></td>
<td style="text-align: right;">$7.06M</td>
<td style="text-align: right;">$257,559</td>
<td style="text-align: right;">1.49%</td>
<td style="text-align: right;">8,240</td>
</tr>
</tbody>
</table>
<p><strong>What this tells us:</strong></p>
<ul>
<li><strong>Accessories and Clothing</strong> drive the majority of profit due to strong margins (17% and 15% respectively)</li>
<li><strong>Bikes</strong> generate the highest revenue ($7M+) but deliver extremely low margin (~1.5%)</li>
<li>This is a classic retail pattern: high-ticket items equal low margin; accessories equal high margin</li>
</ul>
<p>The bike category is essentially a volume play. It brings in revenue but doesn’t contribute much to the bottom line. Meanwhile, accessories are the real profit engine.</p>
<hr>
</section>
<section id="most-profitable-sub-categories" class="level3">
<h3 class="anchored" data-anchor-id="most-profitable-sub-categories">Most Profitable Sub-Categories</h3>
<p>High-margin accessories dominate profit generation, while high-revenue bike categories struggle with thin margins.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Sub-Category</th>
<th style="text-align: right;">Revenue</th>
<th style="text-align: right;">Profit</th>
<th style="text-align: right;">Avg Margin</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Helmets</strong></span></td>
<td style="text-align: right;">$1.44M</td>
<td style="text-align: right;">$272,058</td>
<td style="text-align: right;">17.27%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Tires and Tubes</strong></span></td>
<td style="text-align: right;">$1.36M</td>
<td style="text-align: right;">$244,189</td>
<td style="text-align: right;">16.80%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #17a2b8; font-weight: 600;"><strong>Jerseys</strong></span></td>
<td style="text-align: right;">$1.01M</td>
<td style="text-align: right;">$165,593</td>
<td style="text-align: right;">14.45%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #fd7e14; font-weight: 600;"><strong>Mountain Bikes</strong></span></td>
<td style="text-align: right;">$4.02M</td>
<td style="text-align: right;">$129,768</td>
<td style="text-align: right;">1.44%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Bottles &amp; Cages</strong></span></td>
<td style="text-align: right;">$377,929</td>
<td style="text-align: right;">$70,565</td>
<td style="text-align: right;">17.24%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #fd7e14; font-weight: 600;"><strong>Touring Bikes</strong></span></td>
<td style="text-align: right;">$935,282</td>
<td style="text-align: right;">$65,686</td>
<td style="text-align: right;">4.49%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Fenders</strong></span></td>
<td style="text-align: right;">$300,787</td>
<td style="text-align: right;">$63,832</td>
<td style="text-align: right;">20.35%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #fd7e14; font-weight: 600;"><strong>Road Bikes</strong></span></td>
<td style="text-align: right;">$2.11M</td>
<td style="text-align: right;">$62,106</td>
<td style="text-align: right;">0.61%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #17a2b8; font-weight: 600;"><strong>Shorts</strong></span></td>
<td style="text-align: right;">$390,164</td>
<td style="text-align: right;">$52,134</td>
<td style="text-align: right;">12.23%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Hydration Packs</strong></span></td>
<td style="text-align: right;">$265,017</td>
<td style="text-align: right;">$45,237</td>
<td style="text-align: right;">15.60%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #17a2b8; font-weight: 600;"><strong>Vests</strong></span></td>
<td style="text-align: right;">$220,398</td>
<td style="text-align: right;">$34,839</td>
<td style="text-align: right;">14.08%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Gloves</strong></span></td>
<td style="text-align: right;">$110,139</td>
<td style="text-align: right;">$23,674</td>
<td style="text-align: right;">20.18%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #17a2b8; font-weight: 600;"><strong>Caps</strong></span></td>
<td style="text-align: right;">$140,652</td>
<td style="text-align: right;">$23,499</td>
<td style="text-align: right;">15.25%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Bike Racks</strong></span></td>
<td style="text-align: right;">$98,139</td>
<td style="text-align: right;">$21,893</td>
<td style="text-align: right;">22.68%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #6f42c1; font-weight: 600;"><strong>Bike Stands</strong></span></td>
<td style="text-align: right;">$83,539</td>
<td style="text-align: right;">$14,374</td>
<td style="text-align: right;">17.08%</td>
</tr>
</tbody>
</table>
<p><strong>Key observations:</strong></p>
<ul>
<li><strong>Helmets, Tires &amp; Tubes, and Jerseys</strong> dominate profit generation with strong margins (14-17%)</li>
<li><strong>High-margin accessories</strong> like Fenders (20.35%), Gloves (20.18%), and Bike Racks (22.68%) are the true profit drivers</li>
<li><strong>Mountain Bikes</strong> generate $4M+ revenue but only $130k profit (1.44% margin)</li>
<li><strong>Road Bikes</strong> show the lowest margin at <strong>0.61%</strong> despite $2.1M revenue, indicating heavy price pressure or cost issues</li>
</ul>
<p>This is where the story gets interesting. Small-ticket items like fenders and gloves are generating margins above 20%, while the high-revenue bike categories are barely breaking even. If I were making pricing decisions, I would focus on protecting margins in accessories and figuring out why bikes are so thin.</p>
<hr>
</section>
<section id="regional-performance" class="level3">
<h3 class="anchored" data-anchor-id="regional-performance">Regional Performance</h3>
<p>Germany stands out as the most profitable market, while the United States leads in volume but lags in efficiency.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Country</th>
<th style="text-align: right;">Revenue</th>
<th style="text-align: right;">Profit</th>
<th style="text-align: right;">Avg Margin</th>
<th style="text-align: right;">Transactions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span style="color: #28a745; font-weight: 600;"><strong>Germany</strong></span></td>
<td style="text-align: right;">$2.63M</td>
<td style="text-align: right;">$577,345</td>
<td style="text-align: right;">26.37%</td>
<td style="text-align: right;">2,837</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #007bff; font-weight: 600;"><strong>United States</strong></span></td>
<td style="text-align: right;">$5.27M</td>
<td style="text-align: right;">$375,840</td>
<td style="text-align: right;">11.36%</td>
<td style="text-align: right;">8,871</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span style="color: #17a2b8; font-weight: 600;"><strong>United Kingdom</strong></span></td>
<td style="text-align: right;">$2.84M</td>
<td style="text-align: right;">$210,084</td>
<td style="text-align: right;">12.10%</td>
<td style="text-align: right;">3,826</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span style="color: #dc3545; font-weight: 600;"><strong>France</strong></span></td>
<td style="text-align: right;">$2.20M</td>
<td style="text-align: right;">$139,772</td>
<td style="text-align: right;">8.49%</td>
<td style="text-align: right;">2,898</td>
</tr>
</tbody>
</table>
<p><strong>Insights:</strong></p>
<ul>
<li><strong>Germany</strong> is the most profitable market with the strongest margins (26.37%) despite fewer transactions. This suggests a premium product mix or less aggressive discounting.</li>
<li><strong>United States</strong> leads in revenue and volume but has significantly lower margins (11.36%), suggesting heavier discounting or a product mix skewed toward low-margin categories.</li>
<li><strong>France</strong> shows the weakest margin performance (8.49%) among top markets.</li>
</ul>
<p>Germany’s performance is particularly striking. They are generating more profit with fewer transactions, which points to either higher prices, a better product mix, or stronger brand positioning. The US market, while high-volume, is clearly operating on thinner margins.</p>
<hr>
</section>
<section id="monthly-revenue-profit-trends" class="level3">
<h3 class="anchored" data-anchor-id="monthly-revenue-profit-trends">Monthly Revenue &amp; Profit Trends</h3>
<p>A dramatic shift occurred between 2015 and 2016, with revenue and profit exploding in late 2015 and 2016 showing massive year-over-year growth.</p>
<p><strong>Key patterns:</strong></p>
<ul>
<li><strong>Huge seasonal spike:</strong> Revenue and profit explode from <strong>July → December 2015</strong>, with December 2015 reaching $1.19M revenue</li>
<li><strong>2016 Q1-Q2 is dramatically stronger</strong> than 2015 with clear year-over-year growth (January 2016: $1.02M vs January 2015: $157k)</li>
<li><strong>Early 2015</strong> shows consistently negative profit margins, flipping positive mid-year</li>
<li><strong>2016 performance</strong> suggests either business expansion, pricing strategy changes, or product mix shifts</li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Year</th>
<th style="text-align: left;">Month</th>
<th style="text-align: right;">Revenue</th>
<th style="text-align: right;">Profit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2015</td>
<td style="text-align: left;">January</td>
<td style="text-align: right;">$157,860</td>
<td style="text-align: right;">-$2,742</td>
</tr>
<tr class="even">
<td style="text-align: left;">2015</td>
<td style="text-align: left;">June</td>
<td style="text-align: right;">$243,409</td>
<td style="text-align: right;">-$3,531</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2015</td>
<td style="text-align: left;">July</td>
<td style="text-align: right;">$484,449</td>
<td style="text-align: right;">$8,978</td>
</tr>
<tr class="even">
<td style="text-align: left;">2015</td>
<td style="text-align: left;">August</td>
<td style="text-align: right;">$705,931</td>
<td style="text-align: right;">$40,267</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2015</td>
<td style="text-align: left;">December</td>
<td style="text-align: right;">$1,196,429</td>
<td style="text-align: right;">$37,447</td>
</tr>
<tr class="even">
<td style="text-align: left;">2016</td>
<td style="text-align: left;">January</td>
<td style="text-align: right;">$1,016,294</td>
<td style="text-align: right;">$162,339</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2016</td>
<td style="text-align: left;">March</td>
<td style="text-align: right;">$1,107,363</td>
<td style="text-align: right;">$177,451</td>
</tr>
<tr class="even">
<td style="text-align: left;">2016</td>
<td style="text-align: left;">June</td>
<td style="text-align: right;">$1,359,297</td>
<td style="text-align: right;">$215,844</td>
</tr>
</tbody>
</table>
<p><strong>Understanding the 2015-2016 Surge:</strong></p>
<p>The data clearly shows what drove the massive increase: <strong>2016 had significantly more transactions and units sold compared to 2015</strong>. When filtering the dashboard by year, 2016 shows roughly 70% more transactions and units sold than 2015. This volume growth directly explains the revenue and profit surge.</p>
<p>The question of <em>why</em> volume increased so dramatically could be answered by several factors: business expansion into new markets or channels, successful marketing campaigns, new product launches, or competitive positioning. However, without product-level IDs or marketing data in this dataset, I cannot pinpoint exactly which specific products, campaigns, or strategies drove the volume growth. The analysis focuses on aggregate patterns at the category level. For more details on data limitations, see the <a href="#data-limitations--assumptions">Data Limitations &amp; Assumptions</a> section.</p>
<hr>
</section>
<section id="customer-segmentation-insights" class="level3">
<h3 class="anchored" data-anchor-id="customer-segmentation-insights">Customer Segmentation Insights</h3>
<p><strong>Revenue by Age:</strong></p>
<ul>
<li><strong>Ages 28-31</strong> drive the highest revenue (core buyer segment)</li>
<li>Revenue remains strong across <strong>late 30s-early 40s</strong>, suggesting mature customers also spend heavily</li>
<li>Very young (18-23) and very old (60+) ages contribute minimal revenue</li>
</ul>
<p><strong>Top revenue-generating ages:</strong> 28 ($563k), 31 ($523k), 29 ($513k), 40 ($480k), 30 ($477k)</p>
<p>The 28-31 age group is clearly the sweet spot. These are likely customers in their early career growth phase with disposable income and active lifestyles. The fact that 40-year-olds also rank high suggests this isn’t just a young person’s market. There’s value in the mid-career segment too.</p>
<hr>
</section>
</section>
<section id="dashboards-insights" class="level2">
<h2 class="anchored" data-anchor-id="dashboards-insights">Dashboards &amp; Insights</h2>
<section id="dashboard-1-sales-performance-profitability" class="level3">
<h3 class="anchored" data-anchor-id="dashboard-1-sales-performance-profitability">Dashboard 1: Sales Performance &amp; Profitability</h3>
<p>This dashboard focuses on understanding what drives revenue and profit at a product and market level. It answers the business questions listed at the top of this page.</p>
<p><img src="images/OverviewStatic.png" class="dashboard-image img-fluid" data-fig-cap="Sales Performance &amp; Profitability Dashboard: interactive Power BI dashboard with KPIs, category analysis, regional performance, and time series trends"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The interactive Power BI dashboard requires a paid subscription to share publicly. A GIF demonstrating the interactive filtering capabilities will be added soon.</p>
</div>
</div>
<p><strong>Key Insights:</strong></p>
<ul>
<li><strong>Accessories &amp; Clothing</strong> produce the strongest margins (17-15%), while <strong>Bikes generate $7M+ revenue but only 1.5% margin</strong> - a classic low-margin, high-volume pattern</li>
<li>Helmets, Tires &amp; Tubes, Jerseys, Fenders, and Gloves dominate profit among sub-categories</li>
<li>Germany is the best-performing region by profit margin (26%), while the US leads volume but not efficiency</li>
<li>A strong seasonal spike occurs from Q3-Q4 2015 to Q1-Q2 2016. See the <a href="#monthly-revenue--profit-trends">Monthly Revenue &amp; Profit Trends</a> section for details on interpreting this surge.</li>
</ul>
<p><strong>Dashboard Components:</strong></p>
<ul>
<li><strong>KPI cards:</strong> Total Sales, Profit, Margin, Units Sold, Transactions</li>
<li><strong>Category-level analysis:</strong> Revenue and profit breakdown by product category</li>
<li><strong>Regional performance:</strong> Profit by country with margin indicators</li>
<li><strong>Time series:</strong> Sales and profit trends over time</li>
<li><strong>Sub-category drill-down:</strong> Top profit-generating products</li>
<li><strong>Interactive slicers:</strong> Filter by Category, Country, Year, Month</li>
</ul>
<hr>
</section>
<section id="dashboard-2-customer-insights-behavioral-analysis" class="level3">
<h3 class="anchored" data-anchor-id="dashboard-2-customer-insights-behavioral-analysis">Dashboard 2: Customer Insights &amp; Behavioral Analysis</h3>
<p><em>Coming Soon</em></p>
<p>This dashboard will focus on understanding <strong>who the customers are, how they behave financially, and which segments contribute the most value</strong>. These insights support decisions related to pricing, targeted promotions, regional strategy, and customer segmentation.</p>
<p><strong>Business Questions to be Answered:</strong></p>
<ul>
<li><strong>Who are the highest-value customers?</strong><br>
</li>
<li><strong>Which age groups drive the most revenue?</strong><br>
</li>
<li><strong>Does gender influence spending patterns?</strong><br>
</li>
<li><strong>How does Average Order Value (AOV) differ across demographic or geographic groups?</strong><br>
</li>
<li><strong>Which regions consistently attract high-value sales?</strong></li>
</ul>
<p><strong>Planned Insights (from SQL Analysis):</strong></p>
<p><strong>Customer Demographics:</strong> - Ages 28-31 are the core revenue-generating segment - Revenue remains strong across late 30s-early 40s - Gender-based differences in purchasing behavior</p>
<p><strong>Regional Customer Value:</strong> - Germany produces the highest-value customers with premium product mix - United States leads volume but shows lower per-customer value - France underperforms across customer value metrics</p>
<p><strong>Product Preferences by Segment:</strong> - High-margin accessories (Helmets, Tires, Jerseys) are customer favorites - Accessory-driven purchases drive profitability, not high-ticket bikes</p>
<hr>
</section>
</section>
<section id="data-limitations-assumptions" class="level2">
<h2 class="anchored" data-anchor-id="data-limitations-assumptions">Data Limitations &amp; Assumptions</h2>
<p>This analysis is based on a single-table transaction dataset with aggregate-level information. Understanding these limitations is important for interpreting the insights accurately.</p>
<section id="data-structure-limitations" class="level3">
<h3 class="anchored" data-anchor-id="data-structure-limitations">Data Structure Limitations</h3>
<p><strong>No Product-Level Identifiers:</strong> - The dataset includes product categories and sub-categories but not individual product SKUs or IDs - Cannot track specific product pricing changes over time - Cannot identify which exact products drove revenue spikes or margin changes - Product-level profitability analysis is limited to category/sub-category aggregates</p>
<p><strong>No Customer Identifiers:</strong> - No unique customer IDs are present in the dataset - Cannot perform customer lifetime value (CLV) analysis - Cannot track repeat purchase patterns or customer journey analysis - Customer segmentation is limited to demographic aggregates (age, gender, location)</p>
<p><strong>Single-Table Format:</strong> - Data is stored in a single flat table rather than normalized relational structure - In production environments, this would typically be split across multiple tables (<code>orders</code>, <code>order_items</code>, <code>customers</code>, <code>products</code>, <code>inventory</code>) - Limits ability to perform complex join-based analysis - Requires assumptions about data relationships</p>
</section>
<section id="assumptions-in-analysis" class="level3">
<h3 class="anchored" data-anchor-id="assumptions-in-analysis">Assumptions in Analysis</h3>
<p><strong>Profitability &amp; Revenue Trends:</strong> - When interpreting spikes in revenue or profit (like the 2015-2016 surge), multiple plausible explanations are considered: business expansion, pricing strategy changes, product mix shifts, or volume growth - Without product-level detail, changes cannot be definitively attributed to specific factors - Analysis focuses on aggregate patterns that are observable at the category and transaction level</p>
<p><strong>Regional Performance:</strong> - Country and state-level insights assume consistent data quality and categorization across regions - Differences in margin could reflect pricing strategies, product mix variations, or data collection differences - Regional comparisons are valid at the aggregate level but may mask local variations</p>
<p><strong>Customer Segmentation:</strong> - Age and gender-based insights are aggregate-level only - Individual customer behavior patterns cannot be analyzed without customer IDs - Demographic insights represent group-level patterns, not individual customer journeys</p>
</section>
<section id="impact-on-insights" class="level3">
<h3 class="anchored" data-anchor-id="impact-on-insights">Impact on Insights</h3>
<p>These limitations are common in exploratory analytics projects using public datasets. The insights presented in this project focus on <strong>aggregate patterns</strong> (category profitability, regional performance, seasonal trends) that are robust despite these constraints. The analysis is designed to answer business questions at the category, regional, and demographic segment levels rather than individual product or customer levels.</p>
<p>For production analytics, additional data sources (product IDs, customer IDs, normalized schema) would enable deeper analysis including: - Product-level pricing optimization - Customer lifetime value and retention analysis - Individual customer segmentation and targeting - More granular profitability analysis</p>
<hr>
</section>
</section>
<section id="key-takeaways" class="level2">
<h2 class="anchored" data-anchor-id="key-takeaways">Key Takeaways</h2>
<p>This project demonstrates a complete, end-to-end analytics workflow from raw data to business insights:</p>
<ul>
<li><strong>Profitability is driven by accessories</strong>, not high-ticket bikes</li>
<li><strong>Bike categories require margin intervention</strong> due to extremely low profitability despite large revenue</li>
<li><strong>Germany is the strongest-performing region</strong>, with high margins and strong customer value</li>
<li><strong>Ages 28-31</strong> represent the most valuable demographic segment</li>
<li><strong>Customer behavior varies sharply by age, gender, and region</strong>, offering multiple opportunities for targeted promotions and pricing refinement</li>
</ul>
<p>Together, the dashboards support product, pricing, and customer decisions by presenting clear KPIs, performance visuals, and segmentation insights.</p>
<hr>
</section>
<section id="project-note" class="level2">
<h2 class="anchored" data-anchor-id="project-note">Project Note</h2>
<p>This is a <strong>personal data analytics project</strong> completed as part of my portfolio development. The analysis demonstrates end-to-end analytics capabilities from SQL data transformation to Power BI visualization, using a publicly available retail transaction dataset.</p>
<p><strong>Dataset Attribution:</strong> - <strong>Dataset:</strong> Analyzing Customer Spending Habits - <strong>Source:</strong> <a href="https://www.kaggle.com/datasets/thedevastator/analyzing-customer-spending-habits-to-improve-sa">Kaggle</a> - <strong>Original Author:</strong> Vineet Bahl - <strong>License:</strong> Dataset copyright by authors (Creative Commons Attribution-ShareAlike)</p>
<p>All analysis, insights, visualizations, and interpretations presented in this project are my own work. The SQL transformation scripts, Power BI dashboards, and business insights were developed independently for educational and portfolio purposes.</p>
<style>
/* Enhanced SQL code block styling - Light theme for better readability */
pre.sourceCode.sql {
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%) !important;
  border-left: 4px solid #007bff !important;
  border-radius: 8px;
  padding: 1.5rem !important;
  padding-left: 3.5rem !important; /* Extra padding for line numbers */
  margin-left: 0 !important;
  box-shadow: 0 4px 12px rgba(0, 123, 255, 0.15);
  border: 1px solid #e9ecef;
  position: relative;
}

/* Ensure line numbers don't overlap with border */
pre.sourceCode.sql .sourceCode {
  padding-left: 0 !important;
}

pre.sourceCode.sql .numberSource {
  left: 0.5rem !important; /* Position line numbers away from border */
  padding-right: 1rem !important;
}

/* Base color for all code text - ensures identifiers/field names are visible */
pre.sourceCode.sql code,
pre.sourceCode.sql code span {
  color: #2c3e50 !important; /* Dark color for good contrast on light background */
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace !important;
  font-size: 0.95rem !important;
  line-height: 1.6 !important;
  background: transparent !important;
}

/* SQL syntax highlighting improvements - brighter colors that work in both modes */
pre.sourceCode.sql code span.kw,
pre.sourceCode.sql .kw { color: #0066cc !important; font-weight: 700; } /* keywords - blue */
pre.sourceCode.sql code span.st,
pre.sourceCode.sql .st { color: #d63384 !important; } /* strings - pink */
pre.sourceCode.sql code span.co,
pre.sourceCode.sql .co { color: #6c757d !important; font-style: italic; } /* comments - gray */
pre.sourceCode.sql code span.ot,
pre.sourceCode.sql .ot { color: #fd7e14 !important; font-weight: 600; } /* operators - orange */
pre.sourceCode.sql code span.va,
pre.sourceCode.sql .va { color: #0056b3 !important; font-weight: 700; } /* variables/identifiers - darker bright blue for better readability */
pre.sourceCode.sql code span.fu,
pre.sourceCode.sql .fu { color: #0056b3 !important; font-weight: 600; } /* functions - darker blue */
pre.sourceCode.sql code span.dt,
pre.sourceCode.sql .dt { color: #c41d7f !important; font-weight: 700; } /* data types - darker bright pink/magenta for better readability */

/* Enhanced table styling */
table {
  border-collapse: separate;
  border-spacing: 0;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  margin: 1.5rem 0;
}

table thead {
  background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
}

table thead th {
  color: white !important;
  font-weight: 600;
  padding: 1rem;
  text-align: left;
}

table tbody tr {
  transition: background-color 0.2s ease;
}

table tbody tr:hover {
  background-color: rgba(0, 123, 255, 0.05);
}

table tbody td {
  padding: 0.875rem 1rem;
  border-top: 1px solid #e9ecef;
}

/* Enhanced heading styles */
h2 {
  color: #2c3e50;
  font-weight: 700;
  margin-top: 2.5rem;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 3px solid #007bff;
}

h3 {
  color: #495057;
  font-weight: 600;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

/* Callout note styling */
.callout-note {
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
  border-left: 4px solid #007bff;
  border-radius: 8px;
  padding: 1.5rem;
  margin: 1.5rem 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.callout-note h4 {
  color: #007bff;
  margin-top: 0;
  font-weight: 700;
}

/* Dark mode adjustments */
html[data-theme='dark'] pre.sourceCode.sql {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%) !important;
  border-left-color: #4da3ff;
  border-color: #4a5568;
  padding-left: 3.5rem !important; /* Same padding for dark mode */
}

html[data-theme='dark'] pre.sourceCode.sql .numberSource {
  left: 0.5rem !important;
  padding-right: 1rem !important;
}

/* Base color for all code text in dark mode - ensures identifiers are visible */
html[data-theme='dark'] pre.sourceCode.sql code,
html[data-theme='dark'] pre.sourceCode.sql code span,
html[data-theme='dark'] pre.sourceCode.sql code > span,
html[data-theme='dark'] pre.sourceCode.sql .sourceCode code,
html[data-theme='dark'] pre.sourceCode.sql .sourceCode code span {
  color: #e8e8e8 !important; /* Bright white for maximum visibility */
}

/* Syntax highlighting overrides - these will override the base color */
html[data-theme='dark'] pre.sourceCode.sql code span.kw,
html[data-theme='dark'] pre.sourceCode.sql code .kw { 
  color: #4da3ff !important; 
  font-weight: 600; 
}

html[data-theme='dark'] pre.sourceCode.sql code span.st,
html[data-theme='dark'] pre.sourceCode.sql code .st { 
  color: #ff6b9d !important; 
}

html[data-theme='dark'] pre.sourceCode.sql code span.co,
html[data-theme='dark'] pre.sourceCode.sql code .co { 
  color: #6c757d !important; 
  font-style: italic; 
}

html[data-theme='dark'] pre.sourceCode.sql code span.va,
html[data-theme='dark'] pre.sourceCode.sql code .va { 
  color: #7dd3fc !important; /* Brighter cyan-blue for identifiers in dark mode */
  font-weight: 700; 
}

html[data-theme='dark'] pre.sourceCode.sql code span.fu,
html[data-theme='dark'] pre.sourceCode.sql code .fu { 
  color: #7dd3fc !important; 
  font-weight: 600; 
}

html[data-theme='dark'] pre.sourceCode.sql code span.ot,
html[data-theme='dark'] pre.sourceCode.sql code .ot { 
  color: #ffd54f !important; 
  font-weight: 600; 
}

html[data-theme='dark'] pre.sourceCode.sql code span.dt,
html[data-theme='dark'] pre.sourceCode.sql code .dt { 
  color: #f9a8d4 !important; /* Brighter pink for data types in dark mode */
  font-weight: 700; 
}

html[data-theme='dark'] table thead {
  background: linear-gradient(135deg, #0056b3 0%, #004085 100%);
}

/* Dark mode heading styles - target both data-theme and body class for maximum compatibility */
html[data-theme='dark'] h1,
html[data-theme='dark'] h2,
html[data-theme='dark'] h3,
html[data-theme='dark'] h4,
html[data-theme='dark'] h5,
html[data-theme='dark'] h6,
body.quarto-dark h1,
body.quarto-dark h2,
body.quarto-dark h3,
body.quarto-dark h4,
body.quarto-dark h5,
body.quarto-dark h6,
html[data-theme='dark'] main h1,
html[data-theme='dark'] main h2,
html[data-theme='dark'] main h3,
html[data-theme='dark'] main h4,
body.quarto-dark main h1,
body.quarto-dark main h2,
body.quarto-dark main h3,
body.quarto-dark main h4 {
  color: #ffffff !important;
}

html[data-theme='dark'] h2,
body.quarto-dark h2,
html[data-theme='dark'] main h2,
body.quarto-dark main h2 {
  border-bottom-color: #4da3ff !important;
}

html[data-theme='dark'] .callout-note {
  background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
  border-left-color: #4da3ff;
}

html[data-theme='dark'] .callout-note h4,
html[data-theme='dark'] .callout-note h2 {
  color: #4da3ff !important;
}

html[data-theme='dark'] .callout-note p,
html[data-theme='dark'] .callout-note li,
html[data-theme='dark'] .callout-note td {
  color: #e2e8f0 !important;
}

/* Dark mode text visibility - target main content area */
html[data-theme='dark'] main p,
html[data-theme='dark'] #quarto-content p,
html[data-theme='dark'] .quarto-content p {
  color: #cbd5e0 !important;
}

html[data-theme='dark'] main li,
html[data-theme='dark'] #quarto-content li,
html[data-theme='dark'] .quarto-content li {
  color: #cbd5e0 !important;
}

html[data-theme='dark'] table tbody tr:hover {
  background-color: rgba(77, 163, 255, 0.1);
}

/* Dashboard image styling - make it larger and use more screen space */
img.dashboard-image,
figure img[src*="OverviewStatic"],
figure:has(img[src*="OverviewStatic"]) img {
  width: 100% !important;
  max-width: 100% !important;
  height: auto !important;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

figure:has(img.dashboard-image),
figure:has(img[src*="OverviewStatic"]) {
  width: 100% !important;
  max-width: 100% !important;
  margin: 2rem 0 !important;
}

/* Adjust main content area to use more horizontal space */
main .column-body,
.quarto-layout-panel .quarto-layout-row .content,
.page-columns .content {
  max-width: 95% !important;
}

/* Make sidebar narrower to give more space to content */
.quarto-sidebar,
.sidebar {
  width: 200px !important;
  min-width: 180px !important;
}

/* On larger screens, maximize content width */
@media (min-width: 992px) {
  main .column-body,
  .quarto-layout-panel .quarto-layout-row .content {
    max-width: calc(100vw - 280px) !important;
  }
  
  img.dashboard-image,
  figure img[src*="OverviewStatic"] {
    max-width: 100% !important;
  }
}
</style>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/zain-ghias\.github\.io\/zain-website\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Zain Ghias, University of Toronto @ 2025</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This page is built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>